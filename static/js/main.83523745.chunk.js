(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){e.exports=a(39)},21:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),c=a(13),u=a.n(c),o=a(3),l=(a(21),a(14)),i=a(2),m=a.n(i),d="https://login-backend-rest-api.herokuapp.com/",g={search:function(e){return m.a.get("".concat(d,"?username=").concat(e)).then(function(e){return e.data})},login:function(e){return m.a.post(d,{action:"login",obj:e}).then(function(e){return e.data})},logout:function(e){return m.a.post(d,{action:"logout",obj:e}).then(function(e){return e.data})},create:function(e){return m.a.post(d,{action:"create",obj:e}).then(function(e){return e.data})},update:function(e){return m.a.put(d,e).then(function(e){return e.data})},del:function(e){return m.a.post(d,{action:"delete",obj:e}).then(function(e){return e.data})}},p=function(e){var t=e.u,a=e.setUser,n=e.setMessage,r=e.setMessageStatus,c=e.setTimer;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"logged"},s.a.createElement("h3",null,"Logged in as user ",t.username),s.a.createElement("button",{className:"btnAction",onClick:function(){var e={id:t.id};g.logout(e).then(function(){a(),r("success"),n("Logged out!"),c(2e3)}).catch(function(e){n(e),r("error"),c(2e3)})}},"log out")),s.a.createElement("form",{id:"editName",value:t.id,onSubmit:function(e){e.preventDefault();var s={id:t.id,loginKey:t.loginKey,username:e.target[0].value};g.update(s).then(function(e){"object"===typeof e?(a(Object(l.a)({},t,{username:e.username})),n("Username changed to ".concat(e.username,"!")),r("success"),c(2e3)):(n(e),r("alert"),c(2e3))})}},s.a.createElement("p",null,"Change name"),s.a.createElement("input",{placeholder:t.username?t.username:"Username",required:!0}),s.a.createElement("button",null,"Send")),s.a.createElement("form",{id:"editPassword",onSubmit:function(e){e.preventDefault();var a={id:t.id,loginKey:t.loginKey,password:e.target[0].value,newPassword:e.target[1].value};g.update(a).then(function(e){"object"===typeof e?(n(e.mes),r("success"),c(2e3)):(n(e),r("error"),c(2e3))})}},s.a.createElement("p",null,"Change password"),s.a.createElement("input",{placeholder:"Old Password",type:"password",required:!0}),s.a.createElement("input",{placeholder:"New Password",type:"password",required:!0}),s.a.createElement("button",null,"Send")),s.a.createElement("div",{className:"delete"},s.a.createElement("p",null,"Delete user"),s.a.createElement("button",{onClick:function(e){if(e.preventDefault(),window.confirm("Are you sure you want to delete your account? This is permanent!")){var s={id:t.id,loginKey:t.loginKey};g.del(s).then(function(e){a(),n(e),r("alert"),c(2e3)})}}},"Delete User")))},f=function(e){var t=e.user,a=e.setUser,n=e.setMessage,r=e.setMessageStatus,c=e.setTimer,u=e.resetRegister;return t?(u(),s.a.createElement(p,{u:t,setUser:a,setMessage:n,setMessageStatus:r,setTimer:c})):[s.a.createElement(s.a.Fragment,null)]},E=function(e){var t=e.setUser,a=e.setMessage,n=e.setMessageStatus,r=e.setTimer;return s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{id:"register",className:"hide",onSubmit:function(e){e.preventDefault();var s={username:e.target[0].value,password:e.target[1].value};g.create(s).then(function(e){"object"===typeof e?(t(e),a("User ".concat(e.username," created!")),n("success"),r(2e3)):(a(e),n("alert"),r(2e3))}).catch(function(e){a(e),n("error"),r(2e3)})}},s.a.createElement("div",null,s.a.createElement("input",{placeholder:"Username",required:!0}),s.a.createElement("input",{placeholder:"Password",type:"password",required:!0})),s.a.createElement("button",null,"Register")))},b=function(e){var t=e.setUser,a=e.setMessage,n=e.setMessageStatus,r=e.setTimer;return s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{id:"login",onSubmit:function(e){e.preventDefault();var s={username:e.target[0].value,password:e.target[1].value};g.login(s).then(function(e){"object"===typeof e?(t(e),a("Logged in as ".concat(e.username)),n("success"),r(2e3)):(a(e),n("error"),r(2e3))}).catch(function(e){a(e),n("error"),r(2e3)})}},s.a.createElement("div",null,s.a.createElement("input",{placeholder:"Username",required:!0}),s.a.createElement("input",{placeholder:"Password",type:"password",required:!0})),s.a.createElement("button",null,"Login")))};var v=function(){var e=Object(r.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1],u=Object(r.useState)(!0),l=Object(o.a)(u,2),i=l[0],m=l[1],d=Object(r.useState)(),p=Object(o.a)(d,2),v=p[0],h=p[1],w=Object(r.useState)("success"),y=Object(o.a)(w,2),j=y[0],S=y[1],M=Object(r.useState)(!1),O=Object(o.a)(M,2),U=O[0],N=O[1],T=Object(r.useState)(),k=Object(o.a)(T,2),L=k[0],A=k[1];g.search("muumipeikko").then(function(e){}).catch(function(e){console.log(e)});var q=function(e){"true"===e.target.value?(m(!0),document.getElementById("register").classList.add("hide"),document.getElementById("login").classList.remove("hide")):(m(!1),document.getElementById("register").classList.remove("hide"),document.getElementById("login").classList.add("hide"))},D=function(e){U&&clearTimeout(n),N(!0),A("show"),n=setTimeout(function(){A(),setTimeout(function(){h(null)},51),N(!1)},e)};return s.a.createElement("div",{className:"App"},s.a.createElement("span",{id:"messages",className:"".concat(j," ").concat(L)},s.a.createElement("p",null,v)),s.a.createElement("div",{className:a?"userPage":"userActions"},!a&&s.a.createElement("div",{className:"selectors"},s.a.createElement("button",{onClick:q,value:!0,className:i?"btnAction active":"btnAction"},"Login"),s.a.createElement("button",{onClick:q,value:!1,className:i?"btnAction":"btnAction active"},"Register")),a?s.a.createElement(f,{user:a,setUser:c,setMessage:h,setMessageStatus:S,setTimer:D,resetRegister:function(){i||m(!0)}}):s.a.createElement(s.a.Fragment,null,s.a.createElement(E,{setUser:c,setMessage:h,setMessageStatus:S,setTimer:D}),s.a.createElement(b,{setUser:c,setMessage:h,setMessageStatus:S,setTimer:D}))))};u.a.render(s.a.createElement(v,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.83523745.chunk.js.map